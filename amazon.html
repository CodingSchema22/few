<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Product Detail</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="logoe">
      <h1>Falcon</h1>
    </div>
    <button class="menu-toggle" id="menu-open">☰</button>
    <button class="menu-toggle" id="menu-close" style="display: none;">✖</button>
    <div class="nav-menu" id="nav-menu">
      <div class="nav-item"><a href="home.html">Home</a></div>
      <div class="nav-item dropdown">
        <a href="javascript:void(0)" onclick="toggleDropdown(this)">Glasses ▼</a>
        <div class="dropdown-menu">
          <a href="glasses.html">Men</a>
          <a href="glasses.html">Women</a>
          <a href="glasses.html">Child</a>
        </div>
      </div>
      <div class="nav-item dropdown">
        <a href="javascript:void(0)" onclick="toggleDropdown(this)">Lens ▼</a>
        <div class="dropdown-menu">
          <a href="lens.html">Men</a>
          <a href="lens.html">Women</a>
        </div>
      </div>
      <div class="nav-item"><a href="card.html">Contact</a></div>
      <div class="nav-item"><a href="account.html">Account</a></div>
    </div>
    <a href="#" id="openCart">
      <img src="cart.png" width="30" height="30" alt="Cart" />
    </a>
    <span class="cart-counter">0</span>
  </header>

  <main class="product-detail">
    <div class="product-images">
      <img id="product-image" src="glasses.jpg" alt="Product Image" class="main-image" />
      <div class="thumbnail-group">
        <img id="thumb-1" src="glasses.jpg" alt="Thumb 1" />
        <img id="thumb-2" src="glasses.jpg" alt="Thumb 2" />
        <img id="thumb-3" src="glasses.jpg" alt="Thumb 3" />
      </div>
    </div>

    <div class="product-info">
      <h1 id="product-name"></h1>
      <p id="product-price" class="price"></p>
      <div class="rating">★★★★☆ <span>(120 reviews)</span></div>
      <p class="desc">Stylish and comfortable. Multiple sizes and colors available.</p>

      <div class="shop-container">
        <button class="shop-button add-to-cart">
          <span class="shop-text">Add to Cart</span>
          <span class="shop-more"></span>
        </button>
        <button class="shop-button buy-now">
          <span class="shop-text">Buy Now</span>
          <span class="shop-more"></span>
        </button>
      </div>
    </div>
  </main>
<script src="script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const product = JSON.parse(localStorage.getItem("selectedProduct"));

      if (product) {
        // Set product info
        document.getElementById("product-name").textContent = product.name;
        document.getElementById("product-price").textContent = "₹" + product.price;
        document.getElementById("product-image").src = product.image;
        document.getElementById("thumb-1").src = product.image;
        document.getElementById("thumb-2").src = product.image;
        document.getElementById("thumb-3").src = product.image;
      }

      // Add to cart
      document.querySelector(".add-to-cart")?.addEventListener("click", () => {
        if (!product) return;
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        const existing = cart.find(item => item.name === product.name);
        if (existing) existing.qty++;
        else cart.push({ name: product.name, price: product.price, qty: 1, image: product.image });

        localStorage.setItem("cart", JSON.stringify(cart));

        // Update counter
        const counter = document.querySelector(".cart-counter");
        if (counter) {
          const totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
          counter.textContent = totalQty;
        }
      });

      // Buy now
      document.querySelector(".buy-now")?.addEventListener("click", () => {
        if (!product) return;
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        const existing = cart.find(item => item.name === product.name);
        if (existing) existing.qty++;
        else cart.push({ name: product.name, price: product.price, qty: 1, image: product.image });

        localStorage.setItem("cart", JSON.stringify(cart));
        window.location.href = "checkout.html";
      });
    });

    // Optional: dropdown toggle
    function toggleDropdown(el) {
      const parent = el.closest(".dropdown");
      parent?.classList.toggle("active");
    }
  </script>
</body>
</html>
